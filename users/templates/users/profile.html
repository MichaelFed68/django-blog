{% extends 'base.html' %}

{% block title %} {{ author.get_username }} | Авторы {% endblock %}

{% block style %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'blog/css/article_list.css' %}">
    <link rel="stylesheet" href="{% static 'blog/css/tags/tags.css' %}">
    <style>
        .link-pagination, .pagination {
            color: var(--main-color);
        }
        main {
            background: var(--main-background);
        }
        p {
            white-space: break-spaces;
        }
    </style>
{% endblock %}

{% block content %}
    <h2>Об авторе</h2>
    {% if user.get_username == author.get_username %}
    <p><a href="{% url 'users:update_user' user.get_username %}">Редактировать</a></p>
    {% endif %}
    <p><b>Псевдоним: </b>{{ author.get_username }}</p>
    <p><b>Полностью: </b>{{ author.get_full_name }}</p>
    <p><b>Публикаций: </b>{{ author.article_set.count }}</p>
    <p class="about_author"><b>О себе: </b>{{ author.profile.about_me }}</p>

    {% if author.profile.tags.all %}
    <p>Следит за тегами:</p>
        <div class="tags-body">
        {% for tag in author.profile.tags.all %}
        <a href="{% url 'blog:articles_by_tag' tag.id %}"><div class="tag">{{ tag.name }}&nbsp;</div></a>
        {% endfor %}
    </div>
    {% endif %}

    <br>
    <section>
        <h2 class="section-header">Cтатьи автора</h2>
        {% for article in articles %}
        <a class="click" href="{% url 'blog:article_detail' article.id %}">
            <article class="article">
                <div class="article-body">
                    <div class="article-title">
                        <div class="article-name">
                            {{ article.title }}
                        </div>
                        <div class="article-time">
                            {{ article.created_at|date:"j E" }}
                        </div>
                    </div>
                    <p class="article-content">
                        {{ article.body|truncatewords:10 }}
                    </p>
                </div>
            </article>
        </a>
        {% endfor %}
    </section>
{% endblock %}
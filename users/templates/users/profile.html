{% extends 'base.html' %}

{% block title %} Автор | {{ author.get_username }} {% endblock %}

{% block content %}
    <h2 class="display-4">Об авторе</h2>
    {% if user.get_username == author.get_username %}
    <a href="{% url 'blog:new_article' %}">Создать Статью</a>
    <p><a href="{% url 'users:update_user' user.get_username %}">Редактировать</a></p>
    {% endif %}
    <p><b>Псевдоним: </b>{{ author.get_username }}</p>
    <p><b>Полностью: </b>{{ author.get_full_name }}</p>
    <p><b>Публикаций: </b>{{ author.article_set.count }}</p>
    <p class="about_author"><b>О себе: </b>{{ author.profile.about_me }}</p>

    {% if author.profile.tags.all %}
    <p>Следит за тегами:</p>
        <div class="tags-body">
        {% for tag in author.profile.tags.all %}
        <a href="{% url 'blog:articles_by_tag' tag.id %}"><div class="tag">{{ tag.name }}&nbsp;</div></a>
        {% endfor %}
    </div>
    {% endif %}

    <h2 class="display-4">Статьи пользователя</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        {% for article in object_list %}
        <div class="col">
            <article class="card h-100">
                {% if article.title_photo %}
                <img src="{{ article.title_photo.url }}" class="card-img-top h-100" alt="image">
                {% endif %}
                <div class="card-body">
                    <h5 class="card-title">{{ article.title }}</h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{ article.created_at|date:"j E" }}</h4>
                    <p class="card-text">{{ article.body|truncatewords:10 }}</p>
                    <a href="{% url 'blog:article_detail' article.id %}" class="btn btn-outline-primary">Читать</a>
                </div>
                <div class="card-footer">
                    <small class="text-muted">Обновлено 5 мин. назад</small>
                </div>
            </article>
        </div>
        {% endfor %}
    </div>
{% endblock %}